"use strict";const s=require("./gamepad-22688b91.js"),a={gamepads:{},axeThreshold:[1],isReady:()=>navigator.getGamepads&&typeof navigator.getGamepads=="function"||navigator.getGamepads&&typeof navigator.webkitGetGamepads=="function"||!1,onConnect:new s.LiteEvent,onDisconnect:new s.LiteEvent,onBeforeCycle:new s.LiteEvent,onAfterCycle:new s.LiteEvent,getGamepads:function(){return this.gamepads},getGamepad:function(t){return this.gamepads[t]?this.gamepads[t]:null},set:function(t,e){if(["axeThreshold"].indexOf(t)>=0){if(t==="axeThreshold"&&(!parseFloat(e)||e<0||e>1)){console.error("gamepad: invalid value number");return}if(this[t]=e,t==="axeThreshold"){const i=this.getGamepads(),r=Object.keys(i);for(let o=0;o<r.length;o++)i[r[o]].set("axeThreshold",this.axeThreshold)}}else console.error("gamepad: invalid property")},checkStatus:function(){const t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,e=Object.keys(a.gamepads);a.onBeforeCycle.trigger();for(let n=0;n<e.length;n++)a.gamepads[e[n]].checkStatus();a.onAfterCycle.trigger(),e.length>0&&t(a.checkStatus)},init:function(){window.addEventListener("gamepadconnected",t=>{const e=t.gamepad||t.detail.gamepad;if(window.gamepads||(window.gamepads={}),e){if(!window.gamepads[e.index]){window.gamepads[e.index]=e;const n=s.gamepad.init(e);n.set("axeThreshold",this.axeThreshold),this.gamepads[n.id]=n,this.onConnect.trigger(this.gamepads[n.id])}Object.keys(this.gamepads).length===1&&this.checkStatus()}}),window.addEventListener("gamepaddisconnected",t=>{const e=t.gamepad||t.detail.gamepad;e&&(this.onDisconnect.trigger(this.gamepads[e.index]),delete window.gamepads[e.index],delete this.gamepads[e.index])})},on:function(t,e){switch(t){case"connect":this.onConnect.on(e);break;case"disconnect":this.onDisconnect.on(e);break;case"beforeCycle":this.onBeforeCycle.on(e);break;case"afterCycle":this.onAfterCycle.on(e);break;default:console.error("gamepad: unknown custom event");break}return this},off:function(t,e){switch(t){case"connect":this.onConnect.off(e);break;case"disconnect":this.onDisconnect.off(e);break;case"beforeCycle":this.onBeforeCycle.off(e);break;case"afterCycle":this.onAfterCycle.off(e);break;default:console.error("gamepad: unknown event");break}return this}};a.init();module.exports=a;
